# v1.1.0 Audit Scope
## Description
The v1.1.0 upgrade of the Frax0 mesh introduces several key features to the LayerZero-sourced contracts:
- Adapters that directly mint and burn the protocol token with remote supply accounting
- OFTs with Permit (EIP-2612) and TransferWithAuthorization (EIP-3009)
- FrxUSD OFT with freezing, pausing, and owner burning

## Deployed Contracts
See README:

#### "Proxy (upgradeable OFTs)"
- `frxUSD`
    - (FraxOFTUpgradeable v1.0.1 or FrxUSDOFTUpgradeable v1.0.0) => FrxUSDOFTUpgradeable v1.1.0
- `sfrxUSD`
    - (FraxOFTUpgradeable v1.0.1 or SFrxUSDOFTUpgradeable v1.0.0) => SFrxUSDOFTUpgradeable v1.1.0
- `frxETH`
    - FraxOFTUpgradeable v1.0.1 => FraxOFTUpgradeable v1.1.0
- `sfrxETH`
    - FraxOFTUpgradeable v1.0.1 => FraxOFTUpgradeable v1.1.0
- `WFRAX`
    - (WFRAXTokenOFTUpgradeable v1.1.1 or FraxOFTUpgradeable v1.0.1) => WFRAXTokenOFTUpgradeable v1.1.0
        - Note that version may be a downgrade here.  This will not cause errors, only for internal tracking of release versions.  We are standardizing release versions to the same version.
- `FPI`
    - FraxOFTUpgradeable v1.0.1 => FraxOFTUpgradeable v1.1.0 

#### "Fraxtal Lockboxes"
- `frxUSD`
    - FraxOFTAdapterUpgradeable => FraxOFTMintableAdapterUpgradeable
- `sfrxUSD`
    - FraxOFTAdapterUpgradeable => FraxOFTMintableAdapterUpgradeable
- `FPI`
    - FraxOFTAdapterUpgradeable => FraxOFTMintableAdapterUpgradeable

#### "Ethereum lockboxes"
1. Upgradeable (current) lockboxes
    - `frxUSD`
        - FraxOFTAdapterUpgradeable => FraxOFTMintableAdapterUpgradeable
    - `sfrxUSD`
        - FraxOFTAdapterUpgradeable => FraxOFTMintableAdapterUpgradeable

## Contracts
### contracts/frxUsd/FrxUSDOFTUpgradeable.sol
- Permit and TransferWithAuthorization
- Freezing, pausing, and owner burning
- Used to upgrade all frxUSD OFT instances
    - Previously, deployments created a `FraxOFTUpgradeable` with outdated "FRAX" metadata (several chains are like this).  These instances were upgraded to `FrxUSDOFTUpgradeable` with their metadata overridden to `frxUSD`.
    - Currently, fresh deployments create a `FraxOFTUpgradeable` with the today's "frxUSD" metadata.
    - Post-upgrade, both instances mentioned above will be upgraded to the v1.1.0 `FrxUSDOFTUpgradeable`. New frxUSD instances will be deployed with `FrxUSDOFTUpgradeable` to utilize the additional freezing, pausing, and owner burning.
- There are two initialize functions- one for the upgrade mentioned and one for fresh deployments.

### contracts/frxUsd/SFrxUSDOFTUpgradeable.sol
- Permit and TransferWithAuthorization
- Used to upgrade all sfrxUSD OFT instances
    - Previously, deployments created a `FraxOFTUpgradeable` with outdated "sFRAX" metadata (several chains are like this).  These instances were upgraded to `SFrxUSDOFTUpgradeable` with their metadata overridden to `sfrxUSD`.
    - Currently, fresh deployments create a `FraxOFTUpgradeable` with today's "sfrxUSD" metadata
    - Post-upgrade, both instances mentioned above will be upgraded to the v1.1.0 `SFrxUSDOFTUpgradeable`.  New deployments will be deployed with `FraxOFTUpgradeable`

### contracts/FraxOFTMintableAdapterUpgradeable.sol
- Directly mints and burns the protocol token with remote supply accounting
    - Earns mint/burn rights through the respective UpgradeAdapter script.
- With the exception of non-evm chains, all tokens must be bridged directly through Fraxtal.  This requirement should strictly and accurately track remote supply, as supply will only change on a destination chain when interacting with Fraxtal.

### contracts/FraxOFTUpgradeable.sol
- Permit and TransferWithAuthorization
- Used to upgrade all frxETH, sfrxETH, and FPI OFT instances

### contracts/WFRAXTokenOFTUpgradeable.sol
- Permit and TransferWithAuthorization
- Used to upgrade all WFRAX OFT instances
    - Previously, deployments created a `FraxOFTUpgradeable` with outdated "FXS" metadata (several chains are like this).  These instances were upgraded to `WFRAXTokenOFTUpgradeable` with their metadata overridden to `WFRAX`.
    - Currently, fresh deployments create a `FraxOFTUpgradeable` with today's "WFRAX" metadata

## Scripts
### scripts/ops/V110/destinations/UpgradeV110Destinations.s.sol
- Deploys implementations and generates all msig txs to upgrade "Proxy (upgradeable) OFTs" (Under the above "Deployed Contracts")

### scripts/ops/V110/ethereum/UpgradeAdapterEthereum.s.sol
- Deploys implementations and generates all msig txs to upgrade "Fraxtal Lockboxes" (Under the above "Deployed Contracts")

### scripts/ops/V110/fraxtal/UpgradeAdapterFraxtal.s.sol
- Deploys implementations and generates all msig txs to upgrade "Ethereum Lockboxes" (Under the above "Deployed Contracts")
